@namespace MotoNomad.App.Shared.Components

<MudPaper 
    Elevation="0" 
    Style="border: 2px dashed #5a9367; padding: 1.5rem; margin-bottom: 1.5rem; background-color: rgba(45, 80, 22, 0.05);">
    
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
        <MudIcon Icon="@Icons.Material.Filled.AutoAwesome" Style="color: #5a9367;" Size="Size.Large" />
        <MudText Typo="Typo.h6" Style="color: #e8f0ed;">AI Trip Assistant</MudText>
        <MudChip T="string" Size="Size.Small" Style="background-color: rgba(90, 147, 103, 0.2); color: #5a9367;" Variant="Variant.Outlined">
            🧪 Experimental
        </MudChip>
    </div>
 
    <MudText Typo="Typo.body2" Style="color: #a8b9af;" Class="mb-3">
        Let AI suggest interesting places and activities for your trip based on your destination and travel dates.
    </MudText>
    
    @if (!string.IsNullOrEmpty(_errorMessage))
    {
        <MudAlert Severity="Severity.Error" Class="mb-3" Dense="true">
            @_errorMessage
        </MudAlert>
    }
    
    @if (_suggestion != null && !_isLoading)
    {
        <MudAlert Severity="Severity.Success" Class="mb-3" Dense="true">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>✅ AI suggestions generated successfully!</span>
                <MudButton 
                    Size="Size.Small" 
                    Variant="Variant.Filled" 
                    Style="background-color: #2d5016; color: #ffffff; font-weight: 600;"
                    OnClick="HandleApplySuggestion">
                    Apply to Description
                </MudButton>
            </div>
        </MudAlert>
  
        <MudPaper Elevation="1" Class="pa-3 mb-3" Style="background-color: #0f1a14;">
            <MudText Typo="Typo.subtitle2" Class="mb-2" Style="color: #e8f0ed;">
                <strong>Suggested Description:</strong>
            </MudText>
            <MudText Typo="Typo.body2" Class="mb-3" Style="color: #a8b9af;">
                @_suggestion.SuggestedDescription
            </MudText>
 
            @if (_suggestion.Highlights.Any())
            {
                <MudText Typo="Typo.subtitle2" Class="mb-2" Style="color: #e8f0ed;">
                    <strong>Top Highlights:</strong>
                </MudText>
                <MudList T="string" Dense="true">
                    @foreach (var highlight in _suggestion.Highlights)
                    {
                        <MudListItem T="string" Icon="@Icons.Material.Filled.Place" Style="color: #a8b9af;">
                            <MudText Typo="Typo.body2">@highlight</MudText>
                        </MudListItem>
                    }
                </MudList>
            }
        </MudPaper>
    }

    <MudButton 
        Variant="Variant.Filled" 
        Style="background: linear-gradient(135deg, #1a3a2e 0%, #2d5016 100%); color: #ffffff; font-weight: 600;"
        StartIcon="@Icons.Material.Filled.AutoAwesome"
        OnClick="HandleGenerateSuggestions"
        Disabled="@(!CanGenerateSuggestions() || _isLoading)"
        FullWidth="true">
        @if (_isLoading)
        {
            <MudProgressCircular Size="Size.Small" Indeterminate="true" />
            <span style="margin-left: 8px; color: #ffffff; font-weight: 600;">Generating suggestions...</span>
        }
        else
        {
            <text>Generate AI Suggestions</text>
        }
    </MudButton>
  
    @if (!CanGenerateSuggestions() && !_isLoading)
    {
        <MudText Typo="Typo.caption" Style="color: #a8b9af;" Class="mt-2">
            Please fill in trip name, dates, and transport type to generate suggestions.
        </MudText>
    }
</MudPaper>
