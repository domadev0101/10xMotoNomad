# Test Plan - Login Flow

**Data:** 2025-01-XX  
**Feature:** Login (Faza 4 - Authentication)  
**Status:** ? In Progress - Login Working!

---

## Pre-requisites

- [x] `appsettings.json` configured with real Supabase URL and Anon Key
- [x] `MockAuth.Enabled: false`
- [x] User exists in Supabase Authentication
- [x] User's email is confirmed (if email confirmation enabled)

---

## Test Case 1: Walidacja formularza - puste pola

**Kroki:**
1. Uruchom aplikacj?: `dotnet watch` lub F5
2. Przejd? do `/login`
3. Kliknij przycisk "Login" **bez wpisywania danych**

**Oczekiwany rezultat:**
- ? Przycisk "Login" jest **disabled** (bo `_formValid = false`)
- ? Pola Email i Password pokazuj? czerwone bordery
- ? Pod polami pojawi? si? komunikaty b??dów:
  - Email: "Email is required"
  - Password: "Password is required"

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 2: Walidacja formularza - nieprawid?owy format email

**Kroki:**
1. W polu Email wpisz: `invalid-email` (bez @)
2. W polu Password wpisz: `test1234`
3. Kliknij przycisk "Login"

**Oczekiwany rezultat:**
- ? Przycisk "Login" jest **disabled**
- ? Pole Email pokazuje czerwony border
- ? Pod polem Email komunikat: "Invalid email format"

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 3: Walidacja formularza - has?o za krótkie

**Kroki:**
1. W polu Email wpisz: `test@example.com`
2. W polu Password wpisz: `short` (mniej ni? 8 znaków)
3. Kliknij przycisk "Login"

**Oczekiwany rezultat:**
- ? Przycisk "Login" jest **disabled**
- ? Pole Password pokazuje czerwony border
- ? Pod polem Password komunikat: "Password must be at least 8 characters"

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 4: Login - nieprawid?owe credentials (AuthException)

**Kroki:**
1. W polu Email wpisz: `test@example.com`
2. W polu Password wpisz: `wrongpassword123`
3. Kliknij przycisk "Login"

**Oczekiwany rezultat:**
- ? Przycisk "Login" pokazuje spinner + "Logging in..."
- ? Po ~1-2 sekundach pojawia si? **MudAlert** (czerwony) z komunikatem:
  - "Invalid email or password."
- ? **MudSnackbar** (Error) z tym samym komunikatem
- ? Formularz pozostaje wype?niony (u?ytkownik mo?e poprawi? dane)
- ? Przycisk "Login" jest ponownie aktywny

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 5: Login - poprawne credentials (SUCCESS) ?

**Kroki:**
1. W polu Email wpisz: `{TWÓJ_PRAWDZIWY_EMAIL_Z_SUPABASE}`
2. W polu Password wpisz: `{TWOJE_PRAWDZIWE_HAS?O}`
3. Kliknij przycisk "Login"

**Oczekiwany rezultat:**
- ? Przycisk "Login" pokazuje spinner + "Logging in..."
- ? Po ~1-2 sekundach pojawia si? **MudSnackbar** (Success):
  - "Login successful!"
- ? U?ytkownik jest **automatycznie przekierowany** na `/trips`
- ? W prawym górnym rogu (NavMenu) pojawia si? **LoginDisplay** z avatarem i emailem
- ? NavMenu pokazuje linki dla zalogowanych:
  - "My Trips"
  - "Logout" button

**Status:** ? PASSED - User successfully logged in!

---

## Test Case 6: Guard Clause - zalogowany u?ytkownik próbuje wej?? na /login

**Kroki:**
1. Zaloguj si? (Test Case 5)
2. R?cznie wpisz w pasku adresu: `/login`
3. Naci?nij Enter

**Oczekiwany rezultat:**
- ? U?ytkownik jest **natychmiast przekierowany** na `/trips`
- ? Nie widzi formularza logowania

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 7: Autofocus na polu Email

**Kroki:**
1. Otwórz `/login`
2. Sprawd?, które pole ma focus

**Oczekiwany rezultat:**
- ? Pole Email ma automatyczny focus (kursor migaj?cy)
- ? Mo?esz od razu zacz?? pisa? email bez klikania

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 8: Link do Register

**Kroki:**
1. Na stronie `/login`
2. Kliknij link "Don't have an account? Register"

**Oczekiwany rezultat:**
- ? Przekierowanie na `/register`

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 9: Keyboard Navigation (Enter)

**Kroki:**
1. Otwórz `/login`
2. Wpisz poprawny email i has?o
3. Naci?nij **Enter** (zamiast klika? przycisk)

**Oczekiwany rezultat:**
- ? Formularz zostaje wys?any (takie samo zachowanie jak klikni?cie przycisku)
- ? Logowanie dzia?a poprawnie

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 10: Responsywno?? (Mobile)

**Kroki:**
1. Otwórz DevTools (F12)
2. Toggle Device Toolbar (Ctrl+Shift+M)
3. Wybierz Mobile device (np. iPhone 12)
4. Sprawd? `/login`

**Oczekiwany rezultat:**
- ? Formularz jest responsywny
- ? MudCard nie wychodzi poza ekran
- ? Przyciski s? klikalne
- ? Pola s? ?atwe do wpisania (nie za ma?e)

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 11: Browser Console - brak b??dów

**Kroki:**
1. Otwórz DevTools (F12) ? Console
2. Przejd? przez ca?y flow logowania
3. Sprawd? czy s? b??dy w konsoli

**Oczekiwany rezultat:**
- ? Brak b??dów JS (czerwone komunikaty)
- ?? Mog? by? warningi (?ó?te) - to OK
- ? Console log pokazuje:
  ```
  Initializing Supabase connection...
  Application startup completed successfully
  User logged in successfully: {email}
  ```

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Test Case 12: Network Tab - Supabase API Calls

**Kroki:**
1. Otwórz DevTools (F12) ? Network
2. Zaloguj si?
3. Sprawd? network calls

**Oczekiwany rezultat:**
- ? Request do `https://{PROJECT_ID}.supabase.co/auth/v1/token?grant_type=password`
- ? Status: **200 OK**
- ? Response zawiera `access_token` i `refresh_token`

**Status:** ? Not Tested / ? Passed / ? Failed

---

## Bugs Found

| # | Description | Severity | Status |
|---|-------------|----------|--------|
| - | None found yet | - | - |

---

## Notes

- ? Login successful with real Supabase user!
- 

---

**Test Execution Date:** 2025-01-XX  
**Tester:** User  
**Overall Status:** ? Core Functionality Working - Additional tests pending

